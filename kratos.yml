version: v0.8.0-alpha.3

serve:
  public:
    cors:
      enabled: true
      allowed_origins:
        - https://r2devops.io* # TODO
      allowed_methods:
        - POST
        - GET
        - PUT
        - PATCH
        - DELETE
      allowed_headers:
        - Content-Type
        - Authorization
        - Cookie
      exposed_headers:
        - Content-Type
        - Set-Cookie
      #options_passthrough: true
      debug: true

selfservice:

  default_browser_return_url: https://r2devops.io/u/signin # TODO
  whitelisted_return_urls:
    - https://r2devops.io # TODO

  methods:
    password:
      enabled: false
    profile:
      enabled: true
    oidc:
      enabled: true
      config:
        providers:
          - id: gitlab # this is `<provider-id>` in the Authorization callback URL. DO NOT CHANGE IT ONCE SET!
            provider: gitlab
            # TODO : Paste your Application ID and Application secret here :
            client_id: #Application ID
            client_secret: #Secret
            mapper_url: file:///etc/config/kratos/oidc.gitlab.jsonnet
            scope:
              - openid
              - email

  flows:
    registration:
      after:
        oidc:
          hooks:
            - hook: session
    error:
      ui_url: https://r2devops.io # TODO
    logout:
      after:
        default_browser_return_url: https://r2devops.io # TODO
    settings:
      ui_url: https://r2devops.io/u/dashboard/profile

cookies:
  domain: r2devops.io # TODO

log:
  level: debug
  format: json
  leak_sensitive_values: false

identity:
  default_schema_url: file:///etc/config/kratos/identity.schema.json
